(function(){"use strict";var t={8572:function(t,e,s){var i=s(3751),a=s(641),n=s(33);const o={class:"app"},r={key:0,class:"auth-container"},c={key:1,class:"main-container"},l={class:"header"},u={class:"user-info"},d={class:"day-info"},h={class:"stats"},v={class:"tree-section"},p={key:0,class:"tree-emoji"},g=["src"],m={key:2,class:"growth-effects"},k={class:"tree-stats"},y={class:"level-badge"},L={class:"progress-bar"},f={class:"next-level"},C={class:"category-tabs"},b=["onClick"],D={class:"activities-list"},w=["onClick"],A={class:"activity-icon"},_={class:"activity-content"},O={class:"activity-points"},U={key:0,class:"confirmation-dialog"},E={class:"dialog-content"},T={class:"dialog-buttons"},S={class:"activity-history"},I={class:"history-list"},X={class:"points-gained"},x={key:1,class:"motivation-card"},Q={class:"stats-dashboard"},R={class:"chart-container"},j={ref:"statsChart"},F={class:"daily-summary"},P={class:"summary-item"},M={class:"value"},G={class:"summary-item"},$={class:"value"};function B(t,e,s,B,z,K){return(0,a.uX)(),(0,a.CE)("div",o,[z.currentUser?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",l,[e[7]||(e[7]=(0,a.Lk)("h1",null,"新年种树",-1)),e[8]||(e[8]=(0,a.Lk)("h2",null,"妈的我没调好，请不要重复点击行动按钮",-1)),(0,a.Lk)("div",u,[(0,a.Lk)("span",null,(0,n.v_)(z.currentUser)+"的树",1),(0,a.Lk)("span",d,"第"+(0,n.v_)(z.day)+"/7天",1),(0,a.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>K.logout&&K.logout(...t)),class:"logout-btn"},"退出登录")]),(0,a.Lk)("div",h,[(0,a.Lk)("span",null,"🌱 健康: "+(0,n.v_)(z.stats.health),1),(0,a.Lk)("span",null,"📚 学习: "+(0,n.v_)(z.stats.education),1),(0,a.Lk)("span",null,"✨ 心灵: "+(0,n.v_)(z.stats.spirit),1)])]),(0,a.Lk)("div",v,[(0,a.Lk)("div",{class:(0,n.C4)(["tree-container",{growing:z.isGrowing}])},["string"===typeof K.currentTreeImage?((0,a.uX)(),(0,a.CE)("div",p,(0,n.v_)(K.currentTreeImage),1)):((0,a.uX)(),(0,a.CE)("img",{key:1,src:K.currentTreeImage,class:"tree-image",alt:"树"},null,8,g)),z.isGrowing?((0,a.uX)(),(0,a.CE)("div",m,e[9]||(e[9]=[(0,a.Lk)("div",{class:"sparkles"},null,-1),(0,a.Lk)("div",{class:"progress-ring"},null,-1)]))):(0,a.Q3)("",!0)],2),(0,a.Lk)("div",k,[(0,a.Lk)("div",y,"Level "+(0,n.v_)(z.treeLevel),1),(0,a.Lk)("div",L,[(0,a.Lk)("div",{class:"progress",style:(0,n.Tr)({width:K.progressPercentage+"%"})},null,4)]),(0,a.Lk)("div",f,"距离下一级还需 "+(0,n.v_)(K.pointsToNextLevel)+" 点",1)])]),(0,a.Lk)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(z.categories,(t=>((0,a.uX)(),(0,a.CE)("button",{key:t.id,onClick:e=>z.currentCategory=t.id,class:(0,n.C4)(["tab-button",{active:z.currentCategory===t.id}])},(0,n.v_)(t.icon)+" "+(0,n.v_)(t.name),11,b)))),128))]),(0,a.Lk)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(K.currentActivities,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:(0,n.C4)(["activity-card",{completed:z.completedActivities.has(t.id)}]),onClick:e=>K.startActivity(t)},[(0,a.Lk)("div",A,(0,n.v_)(t.icon),1),(0,a.Lk)("div",_,[(0,a.Lk)("h3",null,(0,n.v_)(t.name),1),(0,a.Lk)("p",null,(0,n.v_)(t.description),1),(0,a.Lk)("div",O,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.points,((t,e)=>((0,a.uX)(),(0,a.CE)("span",{key:e},(0,n.v_)(K.getPointIcon(e))+" +"+(0,n.v_)(t),1)))),128))])])],10,w)))),128))]),z.confirmationDialog?((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("div",E,[e[10]||(e[10]=(0,a.Lk)("h3",null,"确认完成活动",-1)),(0,a.Lk)("p",null,(0,n.v_)(z.selectedActivity?.name),1),(0,a.Lk)("div",T,[(0,a.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>K.confirmActivity&&K.confirmActivity(...t)),class:"confirm-btn"},"确认"),(0,a.Lk)("button",{onClick:e[5]||(e[5]=t=>z.confirmationDialog=!1),class:"cancel-btn"},"取消")])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",S,[e[11]||(e[11]=(0,a.Lk)("h2",null,"今日记录",-1)),(0,a.Lk)("div",I,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(z.todayRecords,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"history-item"},[(0,a.Lk)("span",null,(0,n.v_)(K.formatTime(t.time)),1),(0,a.Lk)("span",null,(0,n.v_)(t.activity.name),1),(0,a.Lk)("span",X,"+"+(0,n.v_)(K.getTotalPoints(t.activity.points)),1)])))),128))])]),z.currentQuote?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("p",null,(0,n.v_)(z.currentQuote),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Q,[e[14]||(e[14]=(0,a.Lk)("h2",null,"能力值统计",-1)),(0,a.Lk)("div",R,[(0,a.Lk)("canvas",j,null,512)]),(0,a.Lk)("div",F,[(0,a.Lk)("div",P,[e[12]||(e[12]=(0,a.Lk)("span",{class:"label"},"连续打卡",-1)),(0,a.Lk)("span",M,(0,n.v_)(z.streakDays)+"天",1)]),(0,a.Lk)("div",G,[e[13]||(e[13]=(0,a.Lk)("span",{class:"label"},"今日完成",-1)),(0,a.Lk)("span",$,(0,n.v_)(z.todayRecords.length)+"/"+(0,n.v_)(z.dailyGoal),1)])])])])):((0,a.uX)(),(0,a.CE)("div",r,[e[6]||(e[6]=(0,a.Lk)("h2",null,"欢迎来到新年种树",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>z.username=t),placeholder:"请输入用户名",onKeyup:e[1]||(e[1]=(0,i.jR)(((...t)=>K.login&&K.login(...t)),["enter"]))},null,544),[[i.Jo,z.username]]),(0,a.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>K.login&&K.login(...t)),class:"auth-button"},"开始种树")]))])}s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(8992),s(3949),s(8872);var z=s(8963),K=s(2589),N={setup(){const t=(0,K.dj)();return{toast:t}},data(){return{username:"",currentUser:null,day:1,treeLevel:1,isGrowing:!1,currentCategory:"health",stats:{health:0,education:0,spirit:0},categories:[{id:"health",name:"健康",icon:"🌱"},{id:"education",name:"学习",icon:"📚"},{id:"spirit",name:"心灵",icon:"✨"}],activities:{health:[{id:"h1",name:"晨跑",icon:"🏃",description:"清晨进行20分钟慢跑",points:{health:15}},{id:"h2",name:"健康饮食",icon:"🥗",description:"一天吃三顿健康均衡的饮食",points:{health:10}},{id:"h3",name:"充足睡眠",icon:"😴",description:"保证7-8小时的优质睡眠",points:{health:12}}],education:[{id:"e1",name:"读书学习",icon:"📖",description:"阅读一小时专业书籍或在线课程",points:{education:15}},{id:"e2",name:"写作练习",icon:"✍️",description:"写一篇学习笔记或日记",points:{education:10}},{id:"e3",name:"技能培养",icon:"💡",description:"学习一项新技能",points:{education:12}}],spirit:[{id:"s1",name:"冥想",icon:"🧘",description:"进行15分钟正念冥想",points:{spirit:15}},{id:"s2",name:"善行",icon:"🤝",description:"帮助他人或做一件善事",points:{spirit:12}},{id:"s3",name:"感恩记录",icon:"🙏",description:"记录三件感恩的事",points:{spirit:10}}]},todayRecords:[],treeImages:{1:"🌱",2:"🌿",3:"🌳",4:"🌲",5:"🎄"},streakDays:0,dailyGoal:5,lastLoginDate:null,statsChart:null,motivationalQuotes:["今天的努力是明天的收获！","坚持就是胜利！","每一个选择都在塑造更好的自己！","小树在见证你的成长！","新的一天，新的开始！"],currentQuote:"",completedActivities:new Set,selectedActivity:null,confirmationDialog:!1}},computed:{currentActivities(){return this.activities[this.currentCategory]||[]},currentTreeImage(){return this.treeImages[this.treeLevel]},progressPercentage(){const t=Object.values(this.stats).reduce(((t,e)=>t+e),0),e=t%50/50*100;return Math.min(100,e)},pointsToNextLevel(){const t=Object.values(this.stats).reduce(((t,e)=>t+e),0),e=50*this.treeLevel;return Math.max(0,e-t)}},methods:{login(){this.username.trim()?(this.clearUserData(),this.currentUser=this.username,localStorage.setItem("current-user",this.username),this.loadUserData(),this.checkDailyReset(),this.$nextTick((()=>{this.updateStatsChart()})),this.updateMotivationalQuote()):this.$toast.error("请输入用户名")},logout(){this.currentUser=null,localStorage.removeItem("current-user"),this.clearUserData()},clearUserData(){this.stats={health:0,education:0,spirit:0},this.day=1,this.treeLevel=1,this.todayRecords=[],this.streakDays=0,this.lastLoginDate=null,this.completedActivities=new Set,this.currentQuote="",this.statsChart&&(this.statsChart.destroy(),this.statsChart=null)},loadUserData(){const t=localStorage.getItem(`tree-data-${this.currentUser}`);if(t){const e=JSON.parse(t);this.stats=e.stats||{health:0,education:0,spirit:0},this.day=e.day||1,this.treeLevel=e.treeLevel||1,this.todayRecords=e.todayRecords||[],this.streakDays=e.streakDays||0,this.lastLoginDate=e.lastLoginDate,this.completedActivities=new Set(e.completedActivities||[])}else this.clearUserData()},saveUserData(){const t={stats:this.stats,day:this.day,treeLevel:this.treeLevel,todayRecords:this.todayRecords,streakDays:this.streakDays,lastLoginDate:this.lastLoginDate,completedActivities:Array.from(this.completedActivities)};localStorage.setItem(`tree-data-${this.currentUser}`,JSON.stringify(t))},startActivity(t){this.completedActivities.has(t.id)?this.$toast.warning("今天已经完成过这个活动啦！"):(this.selectedActivity=t,this.confirmationDialog=!0)},async confirmActivity(){const t=this.selectedActivity;this.confirmationDialog=!1,this.selectedActivity=null,this.isGrowing=!0,this.completedActivities.add(t.id),Object.entries(t.points).forEach((([t,e])=>{this.stats[t]+=e})),this.todayRecords.unshift({time:new Date,activity:t}),await this.playGrowthAnimation(),this.$nextTick((()=>{this.updateStatsChart()})),this.checkLevelUp(),this.saveUserData(),this.updateMotivationalQuote()},async playGrowthAnimation(){return new Promise((t=>{setTimeout((()=>{this.isGrowing=!1,t()}),2e3)}))},updateStatsChart(){this.$nextTick((()=>{try{const t=this.$refs.statsChart;if(!t)return void console.warn("Chart element not found");this.statsChart&&this.statsChart.destroy();const e=t.getContext("2d");this.statsChart=new z.t1(e,{type:"radar",data:{labels:["健康","学习","心灵"],datasets:[{label:"能力值",data:[this.stats.health,this.stats.education,this.stats.spirit],backgroundColor:"rgba(76, 175, 80, 0.2)",borderColor:"#4CAF50",borderWidth:2,pointBackgroundColor:"#4CAF50",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#4CAF50"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:14},bodyFont:{size:14}}},scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20,font:{size:12}},pointLabels:{font:{size:14,weight:"bold"}},grid:{color:"rgba(0,0,0,0.1)"},angleLines:{color:"rgba(0,0,0,0.1)"}}}}})}catch(t){console.error("Failed to create chart:",t)}}))},checkLevelUp(){const t=Object.values(this.stats).reduce(((t,e)=>t+e),0);this.treeLevel=Math.min(5,Math.floor(t/50)+1)},formatTime(t){return new Date(t).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},getTotalPoints(t){return Object.values(t).reduce(((t,e)=>t+e),0)},getPointIcon(t){const e={health:"🌱",education:"📚",spirit:"✨"};return e[t]},updateMotivationalQuote(){const t=Math.floor(Math.random()*this.motivationalQuotes.length);this.currentQuote=this.motivationalQuotes[t]},checkDailyReset(){const t=(new Date).toDateString();if(this.lastLoginDate!==t){this.completedActivities.clear(),this.todayRecords=[],this.lastLoginDate=t;const e=new Date;e.setDate(e.getDate()-1),this.lastLoginDate===e.toDateString()?this.streakDays++:this.streakDays=1,this.saveUserData()}}},mounted(){const t=localStorage.getItem("current-user");t&&(this.currentUser=t,this.loadUserData(),this.checkDailyReset(),this.$nextTick((()=>{this.updateStatsChart()})),this.updateMotivationalQuote())},beforeUnmount(){this.statsChart&&this.statsChart.destroy()}},H=s(6262);const J=(0,H.A)(N,[["render",B]]);var V=J;s(5687);const W=(0,i.Ef)(V),Z={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1};W.use(K.Ay,Z),W.mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var o=1/0;for(u=0;u<t.length;u++){i=t[u][0],a=t[u][1],n=t[u][2];for(var r=!0,c=0;c<i.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[c])}))?i.splice(c--,1):(r=!1,n<o&&(o=n));if(r){t.splice(u--,1);var l=a();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,a,n]}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,o=i[0],r=i[1],c=i[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(c)var u=c(s)}for(e&&e(i);l<o.length;l++)n=o[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},i=self["webpackChunkmy_tree_game"]=self["webpackChunkmy_tree_game"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(8572)}));i=s.O(i)})();
//# sourceMappingURL=app.58d7ec64.js.map